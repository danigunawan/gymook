<h1><%= @gym_class.class_type %></h1>

<p> <%= @gym_class.description %> </p>

<div>
    <small>
        • Priced at: $<%= @gym_class.cost %> •
    </small>
    <small>
        Created by Coach <%= @gym_class.user&.full_name || "Delete" %> •
    </small>
    <small>
        <% if can?(:edit, @gym_class) %>
            <%= link_to("Edit", edit_gym_class_path(@gym_class.id), class: "text-secondary") %>
            •
        <% end %>
    </small>
    <small>
        <% if can?(:delete, @gym_class) %>
            <%= link_to(
                "Delete", 
                gym_class_path, 
                method: :delete, 
                class: "text-secondary", 
                data: {
                    confirm: "Are you sure you want to delete this Gym Class?"
            }) %>
        <% end %>
    </small> <br>
    <small>
        Created at: <%= @gym_class.created_at %>
    </small> <br>
    <small>
        Updated: <%= @gym_class.updated_at %>
    </small>
</div>

<h4> All <%= @gym_class.class_type %> Classes</h4>
<% @occurences.each do |occurence| %>
    <li id="<%= dom_id(occurence) %>" >
        <h6>
            The <%= occurence.gym_class.class_type %> on 
            <%= occurence.start_time.strftime("%A") %> 
            <%= occurence.start_time.strftime("%b") %>.
            <%= occurence.start_time.strftime("%-d") %>: 

        </h6>

        <p>
            This <%= link_to(occurence.gym_class.class_type, gym_class_occurence_path(@gym_class.id, occurence.id), class: "text-secondary") %> 
            class starts on 
            <%= occurence.start_time.strftime("%A") %> at 
            <%=occurence.start_time.strftime("%l:%M%P")  %> and 
            ends at <%= occurence.end_time.strftime("%l:%M%P") %>.
            <small>
                <% if can?(:delete, occurence) %>    
                        <%= link_to(
                            "Delete Occurence",
                            gym_class_occurence_path(@gym_class.id, occurence.id),
                            method: :delete,
                            data: {
                                confirm: "Are you sure you want to delete this occurence?"
                            }, class: "text-secondary"
                        ) %>
                <% end %>
            </small>
        </p>
    </li>
<% end %>